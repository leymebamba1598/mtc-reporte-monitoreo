<p-toast></p-toast>
<p-table styleClass="gridlines" [value]="products" dataKey="id" [tableStyle]="{ 'min-width': '60rem' }" [expandedRowKeys]="expandedRows" (onRowExpand)="onRowExpand($event)" (onRowCollapse)="onRowCollapse($event)">
	<ng-template #caption>
		<div class="flex flex-wrap justify-end gap-2">
			<p-button label="Expand All" icon="pi pi-plus" text (onClick)="expandAll()"></p-button>
			<p-button label="Collapse All" icon="pi pi-minus" text (onClick)="collapseAll()"></p-button>
		</div>
	</ng-template>
	<ng-template #header>
		<tr>
			<th style="width: 5rem"></th>
			<th>Name</th>
			<!-- <th>Image</th> -->
			<th>Price</th>
			<th>Category</th>
			<!-- <th>Reviews</th> -->
			<th>Status</th>
		</tr>
	</ng-template>
	<ng-template #body let-product let-expanded="expanded">
		<tr>
			<td>
				<p-button type="button" pRipple [pRowToggler]="product" text="true"  [rounded]="true" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></p-button>
			</td>
			<td>{{ product.name }}</td>
			<!-- <td><img [src]="'https://primefaces.org/cdn/primeng/images/demo/product/' + product.image" [alt]="product.name" width="50" class="shadow-lg" /></td> -->
			<td>{{ product.price | currency : 'USD' }}</td>
			<td>{{ product.category }}</td>
			<!-- <td><p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false"></p-rating></td> -->
			<td>
				<p-tag [value]="product.inventoryStatus" ></p-tag>
			</td>
		</tr>
	</ng-template>
	<ng-template #expandedrow let-product>
		<tr>
			<td colspan="7">
				<div class="p-4">
					<h5>Orders for {{ product.name }}</h5>
					<p-table styleClass="gridlines" [value]="product.orders" dataKey="id">
						<ng-template #header>
							<tr>
								<th pSortableColumn="id">
									<div class="flex items-center gap-2">
										Id
										<p-sortIcon field="price"></p-sortIcon>
									</div>
								</th>
								<th pSortableColumn="customer">
									<div class="flex items-center gap-2">
										Customer
										<p-sortIcon field="customer"></p-sortIcon>
									</div>
								</th>
								<th pSortableColumn="date">
									<div class="flex items-center gap-2">
										Date
										<p-sortIcon field="date"></p-sortIcon>
									</div>
								</th>
								<th pSortableColumn="amount">
									<div class="flex items-center gap-2">
										Amount
										<p-sortIcon field="amount"></p-sortIcon>
									</div>
								</th>
								<th pSortableColumn="status">
									<div class="flex items-center gap-2">
										Status
										<p-sortIcon field="status"></p-sortIcon>
									</div>
								</th>
								<th style="width: 4rem"></th>
							</tr>
						</ng-template>
						<ng-template #body let-order>
							<tr>
								<td>{{ order.id }}</td>
								<td>{{ order.customer }}</td>
								<td>{{ order.date }}</td>
								<td>{{ order.amount | currency : 'USD' }}</td>
								<td>
									<p-tag [value]="order.status" ></p-tag>
								</td>
								<td><p-button type="button" icon="pi pi-search"></p-button></td>
							</tr>
						</ng-template>
						<ng-template #emptymessage>
							<tr>
								<td colspan="6">There are no order for this product yet.</td>
							</tr>
						</ng-template>
					</p-table>
				</div>
			</td>
		</tr>
	</ng-template>
</p-table>